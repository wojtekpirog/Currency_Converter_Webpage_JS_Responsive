{"version":3,"sources":["script.js"],"names":["amountInput","leftSelect","rightSelect","convertButton","errorMessage","result","URL","getCurrencies","amount","value","fromCurrency","toCurrency","setAttribute","textContent","convert","parseFloat","Math","round","toFixed","fetch","concat","Number","then","response","json","dataReady","data","Object","entries","rates","innerHTML","base","error","handleError","console","message","document","addEventListener","querySelector","forEach","currency"],"mappings":"AAAA,aAAA,IAAIA,EACAC,EAEAC,EACAC,EACAC,EACAC,EAEEC,EAAM,yCAqCZ,IAAMC,EAAgB,WACpB,IAAIC,EAASR,EAAYS,MACrBC,EAAeT,EAAWQ,MAC1BE,EAAaT,EAAYO,MAEzBC,IAAiBC,GACnBP,EAAaQ,aAAa,cAAe,SACzCR,EAAaS,YAAc,oCAE3BT,EAAaQ,aAAa,cAAe,QACzCR,EAAaS,YAAc,GAC3BC,EAAQN,EAAQE,EAAcC,GAElC,EAEMG,EAAU,SAACN,EAAQE,EAAcC,GACrCH,EAA8B,IAArBO,WAAWP,GACpBA,GAAUQ,KAAKC,MAAMT,GAAU,KAAKU,QAAQ,GAE5CC,MAAK,6CAAAC,OAA8CC,OAAOb,GAAO,UAAAY,OAASV,EAAY,QAAAU,OAAOT,IAC1FW,MAAK,SAACC,GAAQ,OAAKA,EAASC,MAAM,IAClCF,MAAK,SAACG,GACL,IAAMC,EAAOC,OAAOC,QAAQH,EAAUI,OAAO,GAE7CxB,EAAOO,aAAa,cAAe,SACnCP,EAAOyB,UAAS,GAAAV,OAAMZ,EAAS,IAAMiB,EAAUM,KAAI,OAAAX,QAAOJ,KAAKC,MAAgB,IAAVS,EAAK,IAAY,KAAKR,QAAQ,GAAK,IAAMQ,EAAK,GACrH,IAAE,OACK,SAACM,GAAK,OAAKC,EAAYD,EAAM,GACxC,EAMMC,EAAc,SAACD,GACnB5B,EAAaQ,aAAa,cAAe,SACzCR,EAAaS,YAAc,qFAC3BqB,QAAQF,MAAK,iDAAAZ,OAAkDY,EAAMG,QAAO,KAC9E,EAEAC,SAASC,iBAAiB,oBA3E1B,WAOErC,EAAcoC,SAASE,cAAc,oBACrCrC,EAAamC,SAASE,cAAc,2BACvBF,SAASE,cAAc,0BACpCpC,EAAckC,SAASE,cAAc,yBACrCnC,EAAgBiC,SAASE,cAAc,6BACvClC,EAAegC,SAASE,cAAc,oBACtCjC,EAAS+B,SAASE,cAAc,qBAIhCnC,EAAckC,iBAAiB,QAAS9B,GAIxCY,MAAMb,GACHgB,MAAK,SAACC,GAAQ,OAAKA,EAASC,MAAM,IAClCF,MAAK,SAACG,GACLE,OAAOC,QAAQH,GAAWc,SAAQ,SAACC,GACjCvC,EAAW6B,WAAS,kBAAAV,OAAsBoB,EAAS,GAAE,MAAApB,OAAKoB,EAAS,GAAE,MAAApB,OAAKoB,EAAS,GAAE,cACrFtC,EAAY4B,WAAS,kBAAAV,OAAsBoB,EAAS,GAAE,MAAApB,OAAKoB,EAAS,GAAE,MAAApB,OAAKoB,EAAS,GAAE,aACxF,IAEAvC,EAAWQ,MAAQ,MACnBP,EAAYO,MAAQ,KACtB,IAAE,OACK,SAACuB,GAAK,OAAKC,EAAYD,EAAM,GA5BxC","file":"script.min.js","sourcesContent":["let amountInput;\r\nlet leftSelect;\r\nlet swapButton;\r\nlet rightSelect;\r\nlet convertButton;\r\nlet errorMessage;\r\nlet result;\r\n\r\nconst URL = \"https://api.frankfurter.app/currencies\";\r\n\r\nfunction main() {\r\n  getElements();\r\n  addListeners();\r\n  renderLists();\r\n};\r\n\r\nfunction getElements() {\r\n  amountInput = document.querySelector(\".app__body-input\");\r\n  leftSelect = document.querySelector(\".app__body-select--from\");\r\n  swapButton = document.querySelector(\".app__body-swap-button\");\r\n  rightSelect = document.querySelector(\".app__body-select--to\");\r\n  convertButton = document.querySelector(\".app__body-convert-button\");\r\n  errorMessage = document.querySelector(\".app__body-error\");\r\n  result = document.querySelector(\".app__body-result\");\r\n};\r\n\r\nfunction addListeners() {\r\n  convertButton.addEventListener(\"click\", getCurrencies);\r\n};\r\n\r\nfunction renderLists() {\r\n  fetch(URL)\r\n    .then((response) => response.json())\r\n    .then((dataReady) => {\r\n      Object.entries(dataReady).forEach((currency) => {\r\n        leftSelect.innerHTML += `<option value=\"${currency[0]}\">${currency[1]} (${currency[0]})</option>`;\r\n        rightSelect.innerHTML += `<option value=\"${currency[0]}\">${currency[1]} (${currency[0]})</option>`;\r\n      });\r\n\r\n      leftSelect.value = \"USD\";\r\n      rightSelect.value = \"EUR\";\r\n    })\r\n    .catch((error) => handleError(error));\r\n}\r\n\r\nconst getCurrencies = () => {\r\n  let amount = amountInput.value;\r\n  let fromCurrency = leftSelect.value;\r\n  let toCurrency = rightSelect.value;\r\n\r\n  if (fromCurrency === toCurrency) {\r\n    errorMessage.setAttribute(\"aria-hidden\", \"false\");\r\n    errorMessage.textContent = \"Currencies should be different.\";\r\n  } else {\r\n    errorMessage.setAttribute(\"aria-hidden\", \"true\");\r\n    errorMessage.textContent = \"\";\r\n    convert(amount, fromCurrency, toCurrency);\r\n  }\r\n}\r\n\r\nconst convert = (amount, fromCurrency, toCurrency) => {\r\n  amount = parseFloat(amount) * 100; // Get the amount in cents\r\n  amount = (Math.round(amount) / 100).toFixed(2);\r\n\r\n  fetch(`https://api.frankfurter.app/latest?amount=${Number(amount)}&from=${fromCurrency}&to=${toCurrency}`)\r\n    .then((response) => response.json())\r\n    .then((dataReady) => {\r\n      const data = Object.entries(dataReady.rates)[0];\r\n\r\n      result.setAttribute(\"aria-hidden\", \"false\");\r\n      result.innerHTML = `${amount + \" \" + dataReady.base} = ${(Math.round(data[1] * 100) / 100).toFixed(2) + \" \" + data[0]}`;\r\n    })\r\n    .catch((error) => handleError(error));\r\n}\r\n\r\n// const formatCurrency = (amountCents) => {\r\n//   return (Math.round(amountCents) / 100).toFixed(2);\r\n// }\r\n\r\nconst handleError = (error) => {\r\n  errorMessage.setAttribute(\"aria-hidden\", \"false\");\r\n  errorMessage.textContent = \"We're sorry, an error has occured while fetching the data. Please try again later.\";\r\n  console.error(`An error has occured while fetching the data: ${error.message}.`);\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", main);"]}